#Sprite frame animations with plists

Cocos2D supports animations in the form of Spritesheets. Spritesheets are a combination of:

- A large image containing multiple textures
- A *.plist* file with descriptions about the individual textures in the image

These spritesheets can be generated by different editors. Officialy Cocos2D supports:

- [Zwoptex](http://www.zwopple.com/zwoptex/)
- [Texture Packer](http://www.codeandweb.com/texturepacker) 

##Example: Creating a spritesheet with Zwoptex

![image](Zwoptex.png)

1. Add all the images to the right panel or to the stage
2. Choose a width and a height for the texture (should fit all images)
3. Layout. This will align the images.
4. Publish. This step creates the *.png* and the corresponding *.plist* file.

###Naming patterns for spritesheets
When spritesheets shall be used for sprite frame animations a consistent naming pattern for the different images within the spritesheet should be chosen. The name of each image also needs to contain the frame number, so that the frames can be ordered correctly when setting up the animation.

##Creating an animation from a spritesheet
Spriteframe animations are created using the `CCAnimation` and the `CCActionAnimate` classes.
MakeGamesWithUs has built a convenience class called `CCAnimatedSprite` that simplifies the process a lot. This documentation will point out how to create animations with `CCAnimatedSprite` and from scratch.

###Creating animations with CCAnimatedSprite
[Download CCAnimatedSprite](https://github.com/MakeGamesWithUs/CCAnimatedSprite) from GitHub.
Add `CCAnimatedSprite.h` and `CCAnimatedSprite.m` to the target project. Also add the *plist* and the *png* files for the animation to the project.

Setting up a CCAnimatedSprite:
	
	// initialize the sprite with the plist
	CCAnimatedSprite *penguin = [CCAnimatedSprite animatedSpriteWithPlist:@"PenguinJump_default.plist"];
	
	// add an animation for a set of frames (the name of the animation is the name of the image befor the dash) 
	[penguin addAnimationwithDelayBetweenFrames:0.1f name:@"jump"];
	
	// run an animation
    [penguin runAnimation:@"jump"];
    
A more detailed description of how to use `CCAnimatedSprite` can be found on [GitHub](https://github.com/MakeGamesWithUs/CCAnimatedSprite).

###Creating animations from scratch
Add the *plist* and the *png* files for the animation to the project. 
This is how to implement the animation:

    // Load all images from the spritesheet
    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"PenguinJump_default.plist"];
    
    // Setup array to store animation frames
    NSMutableArray *animationFrames = [NSMutableArray array];
    
    for(int i = 1; i < 6; ++i)
    {
        // add each animation frame to the array
        CCSpriteFrame *spriteFrame = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName: [NSString stringWithFormat:@"jump-%d.png", i]];
        [animationFrames addObject:spriteFrame];
    }
    
    // Create an animation from the set of frames you created earlier
    CCAnimation *animation = [CCAnimation animationWithSpriteFrames: animationFrames delay:0.1f];
    
    // Create an action with the animation that can then be assigned to a sprite
    CCActionAnimate *animationAction = [CCActionAnimate actionWithAnimation:animation];
    
    // If you like, wrap animation in repeat forever action
    CCActionRepeatForever *repeatAnimation = [CCActionRepeatForever actionWithAction:animationAction];
    
    [self runAction:repeatAnimation];

The above code snippet assumes that it is added to the class that shall be animated.

